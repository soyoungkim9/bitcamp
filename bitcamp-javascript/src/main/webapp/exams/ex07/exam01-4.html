<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ex07</title>
</head>
<body>
<h1>AJAX - AJAX의 제약</h1>
<button id="btn1">요청</button>
<textarea id="ta" rows="10" cols="80"></textarea>


<script>
"use strict"

// AJAX 요청에 대해 응답을
// 언제든 응답 헤더에 "Access-Control-Allow-Origin"을 붙여
// 다른 사이트에서 AJAX요청을 할수 있도록 허락할 수 있다.
// 문제는 자신이 통제할 수 없는 서버는 어떻게 처리할 것인가?
// => 프록시 기법을 사용한다.
// => 웹브라우저는 HTML을 다운로드 받은 서버에 AJAX 요청을 하고,
//    그 서버는 중간에서 실제 목적지 서버로 요청으 ㄹ대행한다.
//    목적지 서버로부터 받으 ㄴ응답을 그대로 AJAX요청자에게

//
var ta = document.querySelector("#ta");

document.querySelector("#btn1").onclick = () => {
	// 1) AJAX 객체 준비
	var xhr = new XMLHttpRequest();
	
	// 2) 서버에 연결(동기 방식으로 요청)
	// => 1번 파라미터: HTTP요청 method. ex) GET, POST, HEAD ...
	// => 2번 파라미터 : URL
	// => 3번 파라미터: 비동기 여부
	xhr.open("GET", "../../jsp/ajaxproxy.jsp", false);
	
	// 3) 서버에 HTTP 요청을 보낸다.
	// => 동기 방식으로 연결되었을 경우 서버에서 응답할 때까지 리턴하지 않는다.
	xhr.send();
	
	// 4) 서버가 응답한 콘텐트를 꺼낸다.
	ta.value = xhr.responseText;
};

</script>
</body>
</html>





